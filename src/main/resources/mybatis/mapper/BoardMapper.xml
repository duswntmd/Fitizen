<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sku.fitizen.mapper.BoardMapper">

    <resultMap id="boardResultMap" type="com.sku.fitizen.domain.Board">
        <result property="bno" column="bno" />
        <result property="title" column="title" />
        <result property="content" column="content" />
        <result property="regDate" column="reg_date" />
        <result property="hits" column="hits" />
        <result property="upDate" column="up_date" />
        <result property="likes" column="likes" />
        <result property="commentCnt" column="comment_cnt" />
        <result property="author" column="author" />
    </resultMap>

    <select id="getBoardList" resultMap="boardResultMap">
        SELECT bno, title, content, reg_date, hits, up_date, likes, comment_cnt, author
        FROM board
        ORDER BY bno DESC
    </select>

    <!-- 게시글 조회 (bno 기준) -->
    <select id="getBoard" parameterType="long" resultMap="boardResultMap">
        SELECT bno, title, content, reg_date, hits, up_date, likes, comment_cnt, author
        FROM board
        WHERE bno = #{bno}
    </select>

    <!-- 게시글 삽입 -->
    <insert id="insertBoard" parameterType="com.sku.fitizen.domain.Board" useGeneratedKeys="true" keyProperty="bno" keyColumn="bno">
        INSERT INTO board (bno, title, content, reg_date, hits, up_date, likes, comment_cnt, author)
        VALUES (BOARD_SEQ.NEXTVAL, #{title}, #{content}, SYSDATE, 0, NULL, 0, 0, #{author})
    </insert>

    <!-- 게시글 수정 -->
    <update id="updateBoard" parameterType="com.sku.fitizen.domain.Board">
        UPDATE board
        SET title = #{title},
            content = #{content},
            up_date = SYSDATE
        WHERE bno = #{bno}
    </update>

    <!-- 게시글 삭제 -->
    <delete id="deleteBoard" parameterType="long">
        DELETE FROM board
        WHERE bno = #{bno}
    </delete>

</mapper>
